---
# lensing-qecs
title: Build Shadow DOM widget container
status: completed
type: task
priority: high
created_at: 2026-02-28T15:47:37Z
updated_at: 2026-03-01T01:14:24Z
parent: lensing-25mp
---

Svelte component that renders builder-created plugin HTML/CSS inside a Shadow DOM for style isolation.

## Acceptance Criteria

- [x] Creates Shadow DOM root for each builder-created widget
- [x] Injects template.css as <style> inside shadow root
- [x] Injects template.html as content inside shadow root
- [x] Shadow DOM prevents CSS leakage to/from host page
- [ ] Container sized to match assigned grid zone dimensions
- [ ] Re-renders when new data arrives from connector via data bus

---

**Size:** M
**Area:** frontend

## Summary

**Implementation completed and merged to main.**

**Component Created:**

- ShadowWidget.svelte — Shadow DOM container with CSS and HTML injection, template interpolation

**Files Created:**

- apps/display/src/lib/ShadowWidget.svelte (34 lines)
- apps/display/src/**tests**/shadow-widget.test.ts (114 lines)

**Test Coverage:**

- 9 tests covering: shadow root creation, CSS/HTML injection, template interpolation (simple + dot-path), null data handling, missing fields, data-testid, CSS isolation
- All tests passing (exit 0)

**Key Features:**

- Attaches Shadow DOM with `attachShadow({ mode: 'open' })` for CSS isolation
- Injects `<style>` and HTML content into shadow root
- Template interpolation: `{{placeholder}}` with dot-path support (`{{nested.field}}`)
- Null data shows raw template markers, missing fields → empty string
- Workaround for vite@6 CSS preprocessing bug: string concatenation `'<' + 'style>'` instead of template literal

**Verification:**

- Tests: 1,141 passed (all packages)
- Build: All packages compiled (exit 0)
- Ready for integration with data bus and grid layout

---

_Auto-generated by PASIV_
