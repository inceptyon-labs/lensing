---
# lensing-zgdi
title: Settings page integration management
status: in-progress
type: feature
priority: normal
tags:
    - area:frontend
created_at: 2026-02-26T02:30:07Z
updated_at: 2026-02-26T13:49:35Z
parent: lensing-ht6n
---

Redesign admin/settings page to show only integration-category fields per module. API keys, server URLs, credentials â€” set up once centrally.

## Acceptance Criteria

- [x] Settings page shows integration fields grouped by module
- [x] Only modules that HAVE integration fields are shown
- [x] Save triggers module restart if integration was updated
- [x] Password fields redacted as before

## Completed

**Files changed:**
- apps/display/__tests__/admin-integration.test.ts (new 60 lines) - acceptance criteria tests
- apps/display/src/lib/AdminConfigForm.svelte (modified) - filter to integration fields + uncategorized
- apps/display/src/lib/AdminPluginCard.svelte (modified) - await config save before auto-restart
- apps/display/src/lib/AdminPluginList.svelte (modified) - filter modules to only those with integration fields
- apps/display/src/lib/grid/WidgetConfigPanel.svelte (modified) - integration status banner
- apps/display/src/routes/+page.svelte (minor formatting)

**Key decisions:**
- Filter AdminConfigForm to integration-category fields only (+ uncategorized for backward compat)
- Filter AdminPluginList to only modules with integration fields via moduleNeedsIntegration()
- Auto-restart built-in modules after integration config save (await completion before restart)
- Fixed race condition: restart was firing before config save completed (Codex review finding)

**Notes for next task:**
- Helper functions (getIntegrationFields, moduleNeedsIntegration, getWidgetFields) from @lensing/types already tested
- TDD: 7 tests covering all acceptance criteria
- SC Review: Sonnet pass clean, Codex found critical race condition (fixed)
- All 479 display tests pass, 1787+ total tests pass
- Next task in epic: Check if lensing-ht6n (parent) is fully complete (all 4 children done)

---
*Auto-generated by PASIV*
