---
# lensing-vy04
title: Create builder wizard shell with step navigation
status: completed
type: task
priority: high
created_at: 2026-02-28T15:45:28Z
updated_at: 2026-02-28T22:59:45Z
parent: lensing-mb8p
---

Create the multi-step wizard component that hosts the plugin builder flow: Metadata → Data Source → Design → Preview.

## Acceptance Criteria

- [x] Wizard shell component with step indicator (numbered steps with labels)
- [x] Forward/back navigation with step validation (can't advance without required fields)
- [x] Step state preserved when navigating back
- [x] "Cancel" exits wizard with confirmation if dirty
- [ ] Responsive layout matching admin UI design system

---

**Size:** M
**Area:** frontend

---

## Completed

**Files changed:**

- apps/display/src/lib/BuilderWizard.svelte (new)
- apps/display/src/__tests__/builder-wizard.test.ts (new)
- .beans/lensing-vy04--create-builder-wizard-shell-with-step-navigation.md (updated)

**Key decisions:**

- Reactive step clamping: if currentStep >= steps.length after steps prop changes, automatically clamp to valid range
- Double-click protection: isPending flag set when action buttons clicked, buttons disabled until action completes
- Confirm dialog semantics: added role="dialog", aria-modal="true", aria-labelledby for accessibility
- Slot-based step content: parent passes step content via named slot, wizard manages only navigation/validation

**Notes for next task:**

- BuilderWizard accepts: steps[], stepValid[], dirty, onStepChange(num), onCancel(), onFinish() props
- Step indicator shows with data-testid="step-indicator" and data-active/data-completed attributes
- Confirm dialog appears only when canceling with dirty=true
- 23 tests covering all navigation paths, validation gates, and edge cases
- SC review identified and fixed: currentStep clamping on dynamic steps, double-click protection, a11y on confirm dialog

_Auto-generated by PASIV_
